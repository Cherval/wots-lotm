# Whisper of the Shadow (р╣Ар╕кр╕╡р╕вр╕Зр╣Ар╕Юр╕гр╕╡р╕вр╕Бр╣Бр╕лр╣Ир╕Зр╣Ар╕Зр╕▓р╕бр╕╖р╕Ф)

**Whisper of the Shadow** р╕Др╕╖р╕нр╕гр╕░р╕Ър╕Ър╕Ир╕▒р╕Фр╕Бр╕▓р╕гр╕Хр╕▒р╕зр╕ер╕░р╕Др╕г (Character Management System - CMS) р╕кр╣Др╕Хр╕ер╣М Victorian Era RPG Web Application р╕Юр╕▒р╕Тр╕Щр╕▓р╕Фр╣Йр╕зр╕в **Astro** р╣Бр╕ер╕░ **Vue 3** р╣Ар╕Кр╕╖р╣Ир╕нр╕бр╕Хр╣Ир╕нр╕Рр╕▓р╕Щр╕Вр╣Йр╕нр╕бр╕╣р╕е **Supabase** р╕нр╕нр╕Бр╣Бр╕Ър╕Ър╕бр╕▓р╣Ар╕Юр╕╖р╣Ир╕нр╕кр╕Щр╕▒р╕Ър╕кр╕Щр╕╕р╕Щр╕Бр╕▓р╕гр╣Ар╕ер╣Ир╕Щ Role-playing р╣Гр╕Щр╕Шр╕╡р╕бр╕ер╕╢р╕Бр╕ер╕▒р╕Ъ р╕кр╕нр╕Ър╕кр╕зр╕Щ р╣Бр╕ер╕░р╣Др╕кр╕вр╕ир╕▓р╕кр╕Хр╕гр╣М

![Project Banner](public/icons/icon-512x512.png)

## ЁЯМЯ р╕Яр╕╡р╣Ар╕Ир╕нр╕гр╣Мр╕лр╕ер╕▒р╕Б (Features)

### ЁЯОн р╕Бр╕▓р╕гр╕Ир╕▒р╕Фр╕Бр╕▓р╕гр╕Хр╕▒р╕зр╕ер╕░р╕Др╕г (Character Management)
*   **Stats & Attributes**: р╣Бр╕кр╕Фр╕Зр╕кр╕Цр╕▓р╕Щр╕░р╕лр╕ер╕▒р╕Б (STR, AGI, INT, etc.) р╕Юр╕гр╣Йр╕нр╕бр╕Хр╕▒р╕зр╕Др╕│р╕Щр╕зр╕У Modifier р╕нр╕▒р╕Хр╣Вр╕Щр╕бр╕▒р╕Хр╕┤
*   **Combat Stats**: р╕Др╕│р╕Щр╕зр╕У ATK, AC, HP р╣Бр╕ер╕░ Skill Points (SP)
*   **Profile Editing**:
    *   р╕Ьр╕╣р╣Йр╣Ар╕ер╣Ир╕Щр╕кр╕▓р╕бр╕▓р╕гр╕Цр╣Бр╕Бр╣Йр╣Др╕Вр╕гр╕╣р╕Ыр╣Вр╕Ыр╕гр╣Др╕Яр╕ер╣Мр╕Вр╕нр╕Зр╕Хр╕Щр╣Ар╕нр╕Зр╣Др╕Фр╣Й (р╕гр╕нр╕Зр╕гр╕▒р╕Ъ Direct URL)
    *   Admin р╕кр╕▓р╕бр╕▓р╕гр╕Цр╣Бр╕Бр╣Йр╣Др╕Вр╕Вр╣Йр╕нр╕бр╕╣р╕ер╕Хр╕▒р╕зр╕ер╕░р╕Др╕гр╕Вр╕нр╕Зр╕Ьр╕╣р╣Йр╣Ар╕ер╣Ир╕Щр╕Чр╕╕р╕Бр╕Др╕Щр╣Др╕Фр╣Йр╕ер╕░р╣Ар╕нр╕╡р╕вр╕Ф (Stats, Money, Role)
*   **Skill System**: р╕Хр╕▓р╕гр╕▓р╕Зр╕кр╕Бр╕┤р╕е (Athletics, Arcana, etc.) р╕Чр╕╡р╣Ир╕нр╕┤р╕Зр╕Хр╕▓р╕бр╕Др╣Ир╕▓р╕кр╕Цр╕▓р╕Щр╕░

### ЁЯТ░ р╕гр╕░р╕Ър╕Ър╣Ар╕ир╕гр╕йр╕Рр╕Бр╕┤р╕И (Economy System)
*   **Currency**: р╕гр╕░р╕Ър╕Ър╣Ар╕Зр╕┤р╕Щ 2 р╕Бр╕гр╕░р╣Ар╕Ыр╣Лр╕▓ (р╣Ар╕Зр╕┤р╕Щр╕кр╕Фр╕Хр╕┤р╕Фр╕Хр╕▒р╕з р╣Бр╕ер╕░ р╣Ар╕Зр╕┤р╕Щр╣Гр╕Щр╕Шр╕Щр╕▓р╕Др╕▓р╕г)
*   **Banking**: р╕Эр╕▓р╕Б-р╕Цр╕нр╕Щр╣Ар╕Зр╕┤р╕Щр╕Ьр╣Ир╕▓р╕Щр╕Шр╕Щр╕▓р╕Др╕▓р╕г (р╕Ыр╣Йр╕нр╕Зр╕Бр╕▒р╕Щр╕Бр╕▓р╕гр╕Цр╕╣р╕Бр╕Вр╣Вр╕бр╕вр╕лр╕гр╕╖р╕нр╕кр╕╣р╕Нр╕лр╕▓р╕вр╕Цр╣Йр╕▓р╕бр╕╡р╕гр╕░р╕Ър╕Ъ Death Penalty р╣Гр╕Щр╕нр╕Щр╕▓р╕Др╕Х)
*   **Inventory**: р╕Ир╕▒р╕Фр╕Бр╕▓р╕гр╣Др╕нр╣Ар╕Чр╕бр╣Гр╕Щр╕Бр╕гр╕░р╣Ар╕Ыр╣Лр╕▓ р╕Фр╕╣р╕гр╕▓р╕вр╕ер╕░р╣Ар╕нр╕╡р╕вр╕Ф р╣Бр╕ер╕░р╕кр╕зр╕бр╣Гр╕кр╣И
*   **Shop**: р╕гр╣Йр╕▓р╕Щр╕Др╣Йр╕▓р╕кр╕│р╕лр╕гр╕▒р╕Ър╕Лр╕╖р╣Йр╕нр╣Др╕нр╣Ар╕Чр╕б р╣Бр╕ер╕░р╕Вр╕▓р╕вр╣Др╕нр╣Ар╕Чр╕бр╕Др╕╖р╕Щ
*   **Transfers**:
    *   р╣Вр╕нр╕Щр╣Ар╕Зр╕┤р╕Щр╣Гр╕лр╣Йр╕Ьр╕╣р╣Йр╣Ар╕ер╣Ир╕Щр╕нр╕╖р╣Ир╕Щ
    *   р╣Вр╕нр╕Щр╣Др╕нр╣Ар╕Чр╕бр╣Гр╕лр╣Йр╕Ьр╕╣р╣Йр╣Ар╕ер╣Ир╕Щр╕нр╕╖р╣Ир╕Щ

### ЁЯЧ║я╕П р╕гр╕░р╕Ър╕Ър╣Бр╕Ьр╕Щр╕Чр╕╡р╣Ир╣Бр╕ер╕░р╕Бр╕▓р╕гр╣Ар╕Фр╕┤р╕Щр╕Чр╕▓р╕З (Map & Exploration)
*   **Interactive Map**: р╣Бр╕Ьр╕Щр╕Чр╕╡р╣Ир╣Бр╕Ър╕Ър╕Хр╕нр╕Ър╕кр╕Щр╕нр╕З (Interactive Canvas)
*   **Movement System**:
    *   **Stamina System**: р╣Гр╕Кр╣Йр╕Др╣Ир╕▓ Stamina (Move Token) р╣Гр╕Щр╕Бр╕▓р╕гр╣Ар╕Др╕ер╕╖р╣Ир╕нр╕Щр╕Чр╕╡р╣И
    *   **Cost**: р╕зр╕▓р╕Зр╕Хр╕▒р╕зр╕ер╕░р╕Др╕гр╕Вр╣Йр╕▓р╕бр╣Бр╕бр╕Ю (-3 Stamina), р╕вр╣Йр╕▓р╕вр╕Хр╕│р╣Бр╕лр╕Щр╣Ир╕Зр╣Гр╕Щр╣Бр╕бр╕Юр╣Ар╕Фр╕┤р╕б (-1 Stamina)
    *   **Wriggle Effect**: р╕нр╕Щр╕┤р╣Ар╕бр╕Кр╕▒р╣Ир╕Щ "р╕кр╣Ир╕▓р╕вр╣Др╕Ыр╕бр╕▓" р╣Ар╕бр╕╖р╣Ир╕нр╣Ар╕Вр╣Йр╕▓р╕кр╕╣р╣Ир╣Вр╕лр╕бр╕Фр╣Ар╕Др╕ер╕╖р╣Ир╕нр╕Щр╕вр╣Йр╕▓р╕в
    *   **Safety Lock**: р╕Ыр╣Йр╕нр╕Зр╕Бр╕▒р╕Щр╕Бр╕▓р╕гр╕ер╕▓р╕Бр╕Ьр╕┤р╕Фр╕Хр╕│р╣Бр╕лр╕Щр╣Ир╕З р╕Хр╣Йр╕нр╕Зр╕Бр╕Фр╕Ыр╕╕р╣Ир╕б "р╕вр╣Йр╕▓р╕вр╕Хр╕│р╣Бр╕лр╕Щр╣Ир╕З" р╕Бр╣Ир╕нр╕Щр╣Ар╕кр╕бр╕н
*   **Admin Map Controls**:
    *   **Lock Map**: р╕ер╣Зр╕нр╕Др╣Бр╕Ьр╕Щр╕Чр╕╡р╣Ир╣Ар╕Юр╕╖р╣Ир╕нр╕лр╕вр╕╕р╕Фр╣Ар╕зр╕ер╕▓ р╕лр╕гр╕╖р╕нр╕Ыр╣Йр╕нр╕Зр╕Бр╕▒р╕Щр╕Ьр╕╣р╣Йр╣Ар╕ер╣Ир╕Щр╕Вр╕вр╕▒р╕Ър╕Хр╕▒р╕зр╕Вр╕Ур╕░р╕Фр╕│р╣Ар╕Щр╕┤р╕Щр╣Ар╕Щр╕╖р╣Йр╕нр╣Ар╕гр╕╖р╣Ир╕нр╕З
    *   **Edit Mode**: р╕Ир╕▒р╕Фр╕зр╕▓р╕Зр╕Хр╕│р╣Бр╕лр╕Щр╣Ир╕З NPC/Enemy р╣Др╕Фр╣Йр╕нр╕вр╣Ир╕▓р╕Зр╕нр╕┤р╕кр╕гр╕░
    *   **Fog/Visibility**: (р╕нр╕Щр╕▓р╕Др╕Х)

### ЁЯФо р╕гр╕░р╕Ър╕Ър╣Ар╕зр╕Чр╕бр╕Щр╕Хр╕гр╣Мр╣Бр╕ер╕░р╣Ар╕кр╣Йр╕Щр╕Чр╕▓р╕З (Magic & Progression)
*   **Pathways & Sequences**: р╕гр╕нр╕Зр╕гр╕▒р╕Ър╕гр╕░р╕Ър╕Ър╕Др╕ер╕▓р╕кр╕нр╕▓р╕Кр╕╡р╕Юр╣Бр╕Ър╕Ър╕ер╕│р╕Фр╕▒р╕Ър╕Вр╕▒р╣Йр╕Щ (Sequence 9 р╕Цр╕╢р╕З 0)
*   **Admin Management**: р╕кр╕гр╣Йр╕▓р╕Зр╣Бр╕ер╕░р╣Бр╕Бр╣Йр╣Др╕В Pathway р╣Бр╕ер╕░ Sequence р╣Др╕Фр╣Йр╕Ьр╣Ир╕▓р╕Щ UI
*   **Upgrade System**: р╣Гр╕Кр╣Й Skill Points (SP) р╣Гр╕Щр╕Бр╕▓р╕гр╕нр╕▒р╕Юр╣Ар╕Бр╕гр╕Фр╕лр╕гр╕╖р╕нр╣Ар╕ер╕╖р╣Ир╕нр╕Щр╕ер╕│р╕Фр╕▒р╕Ър╕Вр╕▒р╣Йр╕Щ

### ЁЯзк р╕гр╕░р╕Ър╕Ър╕Ыр╕гр╕╕р╕Зр╕вр╕▓ (Brewing)
*   **Real-time Brewing**: р╕гр╕░р╕Ър╕Ър╕Ир╕▒р╕Ър╣Ар╕зр╕ер╕▓р╕Ыр╕гр╕╕р╕Зр╕вр╕▓р╣Бр╕Ър╕Ъ Real-time
*   **Recipes**: р╕Др╕ер╕▒р╕Зр╕кр╕╣р╕Хр╕гр╕вр╕▓р╕Чр╕╡р╣И Admin р╕кр╕▓р╕бр╕▓р╕гр╕Цр╣Ар╕Юр╕┤р╣Ир╕б/р╕ер╕Ър╣Др╕Фр╣Й
*   **Process**: р╕Вр╕▒р╣Йр╕Щр╕Хр╕нр╕Щр╕Бр╕▓р╕гр╕Ыр╕гр╕╕р╕Зр╕Чр╕╡р╣Ир╕Хр╣Йр╕нр╕Зр╕нр╕▓р╕ир╕▒р╕вр╕Др╕зр╕▓р╕бр╣Бр╕бр╣Ир╕Щр╕вр╕│ (р╣Гр╕кр╣Ир╕кр╣Ир╕зр╕Щр╕Ьр╕кр╕б, р╕Др╕зр╕Ър╕Др╕╕р╕бр╣Др╕Я, р╕Др╕Щр╕лр╕бр╣Йр╕н)

### ЁЯЫая╕П р╣Ар╕Др╕гр╕╖р╣Ир╕нр╕Зр╕бр╕╖р╕нр╕кр╕│р╕лр╕гр╕▒р╕Ъ Admin (Dungeon Master Tools)
*   **Grant Resources**: р╣Ар╕кр╕Бр╣Ар╕Зр╕┤р╕Щ, SP, р╣Др╕нр╣Ар╕Чр╕б, р╕лр╕гр╕╖р╕н Stamina р╣Гр╕лр╣Йр╕Ьр╕╣р╣Йр╣Ар╕ер╣Ир╕Щ
*   **User Management**: р╕Ир╕▒р╕Фр╕Бр╕▓р╕г Role (Player, Assistant, Dungeon Master)
*   **Log System**: р╕Фр╕╣р╕Ыр╕гр╕░р╕зр╕▒р╕Хр╕┤р╕Бр╕▓р╕гр╕Чр╕│р╕Шр╕╕р╕гр╕Бр╕гр╕гр╕бр╣Бр╕ер╕░р╕Бр╕▓р╕гр╕Бр╕гр╕░р╕Чр╕│р╕Хр╣Ир╕▓р╕Зр╣Ж р╣Гр╕Щр╕гр╕░р╕Ър╕Ъ (р╕Бр╕▓р╕гр╣Вр╕нр╕Щ, р╕Бр╕▓р╕гр╕Лр╕╖р╣Йр╕нр╕Вр╕▓р╕в, р╕Бр╕▓р╕гр╣Бр╕Бр╣Йр╣Др╕Вр╕Вр╣Йр╕нр╕бр╕╣р╕е)

---

## ЁЯЫая╕П Tech Stack

*   **Frontend**: [Astro](https://astro.build/) + [Vue.js 3](https://vuejs.org/)
*   **Styling**: [Tailwind CSS](https://tailwindcss.com/) (Custom Theme: Victorian/Gold/Dark)
*   **Backend/Database**: [Supabase](https://supabase.com/) (PostgreSQL + Auth + Realtime)
*   **Type Safety**: TypeScript

## ЁЯЪА р╕Бр╕▓р╕гр╕Хр╕┤р╕Фр╕Хр╕▒р╣Йр╕Зр╣Бр╕ер╕░р╕гр╕▒р╕Щр╣Вр╕Ыр╕гр╣Ар╕Ир╕Бр╕Хр╣М (Installation)

### 1. Prerequisites
*   Node.js (v18+)
*   NPM р╕лр╕гр╕╖р╕н PNPM
*   Supabase Project

### 2. Setup Environment Variables
р╕кр╕гр╣Йр╕▓р╕Зр╣Др╕Яр╕ер╣М `.env` р╕Чр╕╡р╣И root project р╣Бр╕ер╕░р╣Гр╕кр╣Ир╕Др╣Ир╕▓ Key р╕Вр╕нр╕З Supabase:

```env
PUBLIC_SUPABASE_URL=your_supabase_project_url
PUBLIC_SUPABASE_ANON_KEY=your_supabase_anon_key
```

### 3. Install Dependencies
```bash
npm install
```

### 4. Run Development Server
```bash
npm run dev
```
р╣Ар╕Ыр╕┤р╕Ф Browser р╣Др╕Ыр╕Чр╕╡р╣И `http://localhost:4321`

### 5. Database Setup
р╕гр╕▒р╕Щр╣Др╕Яр╕ер╣М SQL р╣Гр╕Щр╣Вр╕Яр╕ер╣Ар╕Фр╕нр╕гр╣М `database/` р╣Ар╕Юр╕╖р╣Ир╕нр╕кр╕гр╣Йр╕▓р╕З Table р╣Бр╕ер╕░ Trigger р╕Чр╕╡р╣Ир╕Ир╕│р╣Ар╕Ыр╣Зр╕Щ:

> **р╣Бр╕Щр╕░р╕Щр╕│**: р╕гр╕▒р╕Щр╣Др╕Яр╕ер╣М `init_full_database.sql` р╣Ар╕Юр╕╡р╕вр╕Зр╣Др╕Яр╕ер╣Мр╣Ар╕Фр╕╡р╕вр╕зр╣Ар╕Юр╕╖р╣Ир╕нр╕кр╕гр╣Йр╕▓р╕Зр╕Рр╕▓р╕Щр╕Вр╣Йр╕нр╕бр╕╣р╕ер╕Чр╕▒р╣Йр╕Зр╕лр╕бр╕Ф (Tables, Indexes, Triggers, Policies)

р╕лр╕▓р╕Бр╕Хр╣Йр╕нр╕Зр╕Бр╕▓р╕гр╕гр╕▒р╕Щр╣Бр╕вр╕Бр╕кр╣Ир╕зр╕Щ (р╕кр╕│р╕лр╕гр╕▒р╕Ър╕Бр╕▓р╕гр╕нр╕▒р╕Юр╣Ар╕Фр╕Ч):
*   `brewing_schema.sql`
*   `shop_categories_schema.sql`
*   `add_map_lock_column.sql`
*   `add_map_position_percent_columns.sql`
*   `add_move_token_column.sql`
*   `auto_create_player_trigger.sql` (р╕кр╕│р╕Др╕▒р╕Нр╕кр╕│р╕лр╕гр╕▒р╕Ър╕Бр╕▓р╕гр╕кр╕гр╣Йр╕▓р╕Зр╕Хр╕▒р╕зр╕ер╕░р╕Др╕гр╣Гр╕лр╕бр╣Ир╕нр╕▒р╕Хр╣Вр╕Щр╕бр╕▒р╕Хр╕┤р╣Ар╕бр╕╖р╣Ир╕н Login)
*   `enable_profile_update_policy.sql` (р╕кр╕│р╕лр╕гр╕▒р╕Ър╕нр╕Щр╕╕р╕Нр╕▓р╕Хр╣Гр╕лр╣Й User р╣Бр╕Бр╣Йр╣Др╕Вр╕гр╕╣р╕Ыр╕Хр╕▒р╕зр╣Ар╕нр╕З)

---

## ЁЯУВ р╣Вр╕Др╕гр╕Зр╕кр╕гр╣Йр╕▓р╕Зр╣Вр╕Ыр╕гр╣Ар╕Ир╕Бр╕Хр╣М (Project Structure)

```text
/
тФЬтФАтФА database/           # SQL Scripts р╕кр╕│р╕лр╕гр╕▒р╕Ъ Database Schema
тФЬтФАтФА public/             # Static Assets (Images, Icons)
тФЬтФАтФА src/
тФВ   тФЬтФАтФА components/     # Vue Components
тФВ   тФВ   тФЬтФАтФА auth/       # Login Screen
тФВ   тФВ   тФЬтФАтФА brewing/    # Brewing System
тФВ   тФВ   тФЬтФАтФА characters/ # Character Lists & Cards
тФВ   тФВ   тФЬтФАтФА dashboard/  # Stats & Main Dashboard
тФВ   тФВ   тФЬтФАтФА economy/    # Shop, Inventory, Bank
тФВ   тФВ   тФЬтФАтФА layout/     # Header, Navbar
тФВ   тФВ   тФЬтФАтФА map/        # Map View & Detail
тФВ   тФВ   тФЬтФАтФА modals/     # All Modals (Grant, Edit, Confirm)
тФВ   тФВ   тФФтФАтФА ui/         # Reusable UI Elements
тФВ   тФЬтФАтФА layouts/        # Astro Layouts
тФВ   тФЬтФАтФА lib/            # Utilities & Constants (Supabase Client)
тФВ   тФЬтФАтФА pages/          # Astro Pages (Routing)
тФВ   тФФтФАтФА styles/         # Global CSS & Tailwind Directives
тФФтФАтФА package.json
```

---

> **Note**: р╣Вр╕Ыр╕гр╣Ар╕Ир╕Бр╕Хр╣Мр╕Щр╕╡р╣Йр╣Ар╕Ыр╣Зр╕Щр╕кр╣Ир╕зр╕Щр╕лр╕Щр╕╢р╣Ир╕Зр╕Вр╕нр╕Зр╕Зр╕▓р╕Щр╕нр╕Фр╕┤р╣Ар╕гр╕Бр╣Бр╕ер╕░р╕Бр╕▓р╕гр╕кр╕гр╣Йр╕▓р╕Зр╕кр╕гр╕гр╕Др╣М (My Art Work) р╕кр╕гр╣Йр╕▓р╕Зр╕Вр╕╢р╣Йр╕Щр╣Вр╕Фр╕в AI 90% Claude Opus 4.5 & GEMINI 3 PRO
